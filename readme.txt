=== Jomres Booking System Bridge plugin for Wordpress ===
Contributors: jomres
Tags: Booking, hotel, hotels, booking system, booking portal, room booking, online booking software, online reservation, online reservation system, reservation system, hotel booking, villa booking
Donate link: http://www.jomres.net
Requires at least: 3.8
Tested up to: 3.9
Stable tag: trunk
License: GPLv2
License URI: http://www.gnu.org/licenses/gpl-2.0.html



== Description ==

[Jomres](http://www.jomres.net) is a hotel/villa booking system and portal for Joomla and Wordpress. Developed for over 9 years, it's Joomla favourite, and most powerful hotel and villa booking system, and is now available for integration into Wordpress sites.

This plugin contains the bridging plugins required to run Jomres in Wordpress.


= About Jomres =

Jomres is Joomla's longest running Hotel Booking System/Booking portal. GPL licensed and going strong for 9 years, after many requests we've finally modified it to integrate it into Wordpress. The core system is free and is a working booking system which can be enhanced with plugins that can be downloaded through the Jomres Plugin Manager once you have purchased a Download and Support license.

Typically used for renting out rooms in hotels, villas, apartments etc, we've seen it used for everything from golf courses to cars and even tool hire and billboards. 

Jomres is NOT a booking calendar. It's a full booking portal with a variety of search features, monetisation options and more bells and whistles than we can count. Ajax driven throughout, Jomres 8 has been developed under consulation with hoteliers to provide the most userfriendly UX possible.

Jomres has different language files for different property types, so you can mix and match property types on the same installation. Fully multilingual, it uses it's own language translation functionality. This functionality has been developed in such a way that is upgrade safe. Customisation is a breeze.

The system has been built with the mindset that the data you create is yours, and nobody elses. Jomres is not a SAAS/cloud based system where you pay a monthly fee and the availability is subject to the profitability (or otherwise) of a hosting service. Once it's downloaded and installed it's yours to use for the lifetime of your project.

It has historically been written for use in the Joomla Content Management System. We chose to integrate with a CMS because this significantly improves the flexability availabile to our users with respect to how they can customise their sites. Version 8.1 introduces the ability for users to install not only on Joomla, but also into Wordpress. This means that we are able to provide Wordpress users with a tried and tested booking system without them needing to learn a new CMS.

= New in Jomres 8.1 =

* **Wordpress integration** Run Jomres within Wordpress.
* **Booking approvals** Approve/Reject bookings before taking payment online.
* **Email template editing** Property Managers can edit email templates easily in the frontend.
* **Budget** Users are able to set a Budget option in the Property list pages, showing them properties that are within a given budget (the surrounding panel turns green). Bootstrapped templates only.


= Features =

Some extra [Jomres plugins](http://manual.jomres.net/core_plugins.html?ms=BQBAAAAAAAASQAg=&mw=MjQw&st=MA==&sct=MA==) may be needed to access all features.


* **Secure booking portal** Designed from the ground up to be a secure booking portal. Invite property managers to list their properties with you, monetising their involvement through subscription plans, commission fees or both.
* **Responsive** Using responsive templates, we were the first Joomla & Wordpress Booking system to adopt Bootstrap 2, offering a solution even before Joomla 3 was released. Jomres 8 is compatible with Bootstrap 3, which delivers a sleek, intuitive, and powerful mobile first front-end framework to your clients. Another first, where we lead, others are sure to follow.
* **Well documented** With a complete manual and integrated help system we aim to guide you every step of the way.
* **Powerful booking engine** Take deposit payments online through your own Joomla & Wordpress Hotel Booking System. No need to pay somebody else commission! It has a powerful booking engine, making it the most flexible Joomla & Wordpress Hotel Booking System available. Ajax driven, we were among the very first booking systems to utilise this technology and have built extensively on this solid foundation ever since.
* **Open forum for all** Large, active community forum with thousands of members.
* **Modular** The heart of Jomres is modular in design. This approach makes Jomres extremely friendly to third party developers, who we work closely with to ensure that the entire community can add to the system's functionality. This means, even if the system doesn't have a feature you might want it's easy to add new functionality without having to edit the core.
* **Paypal** Paypal support by default, take payments online within minutes. If you are offering a portal you can either choose to take all payments yourself or hotels can take payments through their own accounts and you raise separate commission or subscription invoices. [Jomres partners](http://www.jomres.net/support-mainmenu-209/partners) have also built their own payment gateways, meaning you're not just limited to just Paypal.
* **Search** A large number of different search features are available to add some sparkle to your site and help guide your guests to the property of their choice. Choose from the ubiquitous ajax search to the more exciting "Lucky Dip" plugin.
* **Dashboard** Dynamic, ajax driven Dashboard displays relevent information clearly and cleanly.
* **Easy tariff editing** Choose the tariff editing mode that suits your situation. Use the Normal mode for simple pricing that's valid for the next 10 years...
* **Total control over pricing** ...or the Micromanage mode that allows you total control over pricing and minimum stay lengths.
* **Discounts** Multiple discount features available including coupon codes, partner discounts and personal discounts for guests. QR codes that link direct to the booking form can be printed as part of your promotional material.
* **Customisation** Jomres offers a veritable feast of different ways to customise the system. From Property type specific templates and language files, property specific labels to full-on integration with Microsoft's translation software, there's something here for every level of user.
* **Image uploads** The media centre makes it easy for you to upload, view and delete images for the property, it's slideshow and even for individual rooms.
* **Optional extras** Optional extras can be added easily to a booking. Create a simple extra which can use a number of different pricing models (such as "per booking" or "per day") or if you want to offer finite resources (such as tours or a table in the restraunt) you can opt to use the more extensive Jintour plugin.
* **Simple User Interface** Property details are shown on one page, with an easy to navigate UI, tabbed information pages, google maps and slideshow.
* **Booking Creation Kit** Jomres is a Booking System Creation Kit. Whilst it is designed to work "out of the box" with minimal configuration, it's real strength comes from the power and flexability of it's plugin functionality. Don't offer another cookie-cutter booking site, be creative and innovate, using Jomres as the foundation you can build upon.


= Phoning home =

Note that the Jomres system has to phone home to perform certain actions, for example to find the current version of the system and current versions of plugins, download plugins (if you have a valid license to do so), get latest news etc. It also contacts remote services to find geo-location information, Google maps and currency conversion data. Installation of Jomres and use of it's functionality assumes that you agree that it does this. We don't collect data about you unless you install a Jomres plugin, and then only so that we can ensure that only authorised users can install said plugin.


== Installation ==

This plugin contains only the bridging software required to allow Jomres and Wordpress to work together. To comply with Wordpress plugin directory rules we are unable to include the web installation package, however you can download it for free from [our downloads page](http://www.jomres.net/files/jomres_booking_system_web_installer_for_wordpress.zip).

1. Unzip jomres_booking_system_web_installer_for_wordpress.zip
2. Go to Plugins -> Add new and upload `jomres.zip`.
3. If Jomres isn't yet installed you will see a message saying so and you'll be given a link to follow to download the [Jomres Wordpress Web Installer](http://www.jomres.net/files/jomres_booking_system_web_installer_for_wordpress.zip). You must install this as this installs the actual Jomres Core system.
4. Activate the Jomres Wordpress Web Installer through the 'Plugins' menu in WordPress. This will copy jomres_webinstall.php to the root of your Wordpress installation.
5. Follow the [onscreen instructions](http://manual.jomres.net/step_1___web_installer__recommended_.html?ms=AwAAAAAAAAAKIA==&mw=MjQw&st=MA==&sct=MA==) to download Jomres and install it. Once Jomres has been installed please deactivate and delete the *Jomres Booking System Web Installer for Wordpress*.

Jomres Core is free as in beer. If you want to enhance it's functionality through some of the many available plugins, or want support for it we encourage you to investigate the services we offer, but Jomres Core is free and not crippled in any way.

We do not collect information about you or your server. All Jomres code is provided Open Source.

== Upgrade Notice ==

8.1.-3

* New Feature : Added a new Booking Approval feature that allows managers to screen bookings before they're approved and the booking is inserted into the system.
* New Feature : Added new email template editing feature for managers.
* New Feature : Added support for Wordpress, to allow Jomres to work inside wordpress.

== Frequently Asked Questions ==

= Is there a manual? =

Yup, the [manual](http://manual.jomres.net/jomres_manual.html?ms=AQAAAAAAAAAC&mw=MjQw&st=MA==&sct=MA==) is available to all users.

= Is there a demo? =

[Of course there is :D](http://www.jomres-demo.net/)

= Where can I get support? =

It depends. If you've got a download and support license you can raise a [ticket](http://tickets.jomres.net), if you don't then you can still join the [Community Forum](http://www.jomres.net/jomres-forum).

= I want to dowload the web installer myself, where can I get it from? =

Please visit http://www.jomres.net/download to download the web installer.

= Where can I see information about the web installer? =

Please visit the manual at [manual.jomres.net](http://manual.jomres.net), [more specifically here](http://manual.jomres.net/step_1___web_installer__recommended_.html?ms=AwAAAAAAAAAKIA==&mw=MjQw&st=MA==&sct=MA==).


== Screenshots ==

1. The Property Details page, which is the main source of information for the resources you're renting out, be it a hotel, villa or something like a toolhire business. Note, all screenshots are from a Jomres template running Bootstrap 2.
2. Bookings menu option.
3. Quick Booking modal from the Dashboard. Receptionist/Manager only feature.
4. The Media Centre, allows easy uploading of Jpg and Png images.
5. Google maps. You knew there'd be a Google map in here somewhere, didn't you?
6. Dashboard, this shows several test bookings, with a couple of black bookings included.
7. The Bookings list with Approval states shown (Booking Approvals is new to Jomres 8.1).


== Changelog ==

= 8.1.20 =

Booking cancelled emails added to manager modifyable templates. Contributed by Rod at Jomres Plugins, many thanks mate.

After previous version's changes to improve date handling, now we make proper use of the mindaysbeforearrival setting.

 Removed title from Address inputs of booking form as the tooltips were making the form difficult to use.
Modified new column adding code to not use "after" to resolve issues that users were having after installing a third party plugin that adds it's own column.
Changed the process payment url to NOSEF as one particular implementation was causing incorrect redirects to gateways.

= 8.1.19  =

New feature in list bookings and list properties, can now sort by last changed state.
New functionality to support a new Latest bookings since last active plugin for property managers

Moved Polish zloty notation to end of currency instead of beginning.
Emptied cache before importing eu tax rates.
Updated table-tools calling function in jomres.js to use updated cols.
Updated Polish lang file, thanks Patryk.
Added font awesome switch to jq ui backend for wordpress uses.
Added language to common template vars with the intention that this will allow users to use conditionals in templates for different languages.
Added a new column "is eu country" flag to tax rates table. Added lang and code changes to allow us to flag a country as an eu country or not.
Added Croatia to EU countries.
Added j03020insertbooking_amendinvoice.class.php to obsolete files.
Modified booking engine to use Sleeps search results where possible when populating the required guest numbers field in the booking form.
Updated several tables with indexing.
Modified a query to use IN instead of OR in search queries for a performance improvement.
Modified how the QR code url is constructed to improve functionality in Mexican addresses.
Added functionality to facilitate searching by translated town name.
Added language index for custom text table.
Modified the booking engine so that the next date a room is free is selected if a date isn't passed via url.
Tweaked map template to show maps in BS3 templates more reliably.
Modified the generic booking insert class to accept 0 deposit.
Moved caching options into new tab
Move commission rate site config option to ROI tab.
Tweaked booking engine so that guests from all manager's properties are shown in the guest dropdown.
Added patTemplate caching feature.
Undid a change related to live scrolling.
Modified datatable call so that most recent additions are listed first by default.
Modified frontend show rooms list page to use bs modals instead of older jquery ui modals in BS templates.
Modified Jomres main menu generator to accept multi-dimensional arrays as values when building menus.
Modified recaptcha to ensure https used where relevant.
Updated Datatables javascript files.
Improved how dates are handled when passed to the booking form.
Added a library for http_build_url as some server's don't have pecl http.
Added Joomla 3.4 specific code.

Improved how images for gateways are found for display in list properties page.
Resolved an issue with double inclusion of a javascript file when caching enabled.
Tweaked the module popup class so that bookings are actually shown if the calendar code is enabled to be shown.
Fixed issue where buttons etc would be shown even for non-existant bookings.
Added a variety of changes to fix some javascript issues that intermittently appear.

= 8.1.18 =

Added Multisite support to Jomres, first iteration that supports property sharing (Joomla Multisites only I'm afraid).

Updated galleria slideshow plugin to 1.4.2
Updated Polish lang file, thanks Patryk.
Updated datatables version.


Small tweak to jomres toolbar to ensure that we use the correct version of bootstrap in the admin area.
Improved how we tidy up temp booking data when amending bookings to prevent intermittent error logs of contract ids not set.
Tweaked list properties to ensure search results from ajax are loaded correctly when changing pages.
Fullscreeen view, BS3, updated.
Modified how property list prices are figured out RE arrival date in ajax search
Modified a variety of files so that we use IN in sql queries instead of OR, as it's demonstrated to be up to 3 times faster.
Added a clause to property_list prices class to check that certain fields are populated before setting the arrival date.
Added tariff description for micormanaged tariffs to classic rooms list.
Modified payment methods class to ensure results are cached in memory.
Updated BS2 composite_property_details_notabs.html
Changed how we figure the current url is determined by the error logging function.
Modified payment methods class to ensure results are cached in memory.
Updated how temp booking data is stored.
Modified a url to ensure that the jr_printable flag is set to 1 where appropriate.
Updated composite property details script so that appropriate data is passed to the template if printable is enabled.

Modified booking confirmation page so that modifications of amended bookings are redirected through the amendBooking task first, to ensure that previously booked rooms appear in the room selection list second time around.
Modified new functionality to correctly determine the path to a template file.
BS3 solved a problem when filtering ajax tables.



= 8.1.17 =

Updated bootstrap 3 edit property pages so that features are laid out correctly.
Added a note to invoice handler
Updated the table tools ajax scripts to cope with large queries.
Tweaked dobooking insertion script to ignore quick booking bookings as the booking data archive doesn't exist for them.
Updated Core Bootstrap 3 frontend templates. They look a lot like the demo template layout now. Converted icons to use Font Awesome icons.
Updated site configuration default image sizes to correspond with BS3 template layout changes. Existing installations won't be affected, just new installations.
Added a vertical template to basic module output.
Updated the error logging to include the url that was called.
Added embed to input filtering.
Hardened output filtering to defend against cross site scripting vectors.
Generic booking insert script updated to ensure temporary data is reset after insertion.
Added a call to jomres_database for later use.
Added some tweaks to support having different template files in Joomla templates (overrides). Involves jomsearch_mN modules srch.html templates being renamed to the module's name.
Modified show property header script so that we're not over-purifying the og description.
Added a class that collects gateway information for display in property list.
Removed a no-longer needed css class from jomresHTML.class.php

Fixed an intermittent issue where bookings might not get inserted to the booking data archive due to html tags.

= 8.1.16 =

Added a new column booking_language to contracts table so that confirmation emails can be sent to the guest in their own language.

Removed some unnecessary directory scanning that was in place to discover the location of Jomres. As this file is now created in the installer, the scanning is no longer necessary.
Added new functionality that supports javascript required by the booking form classic rooms list modals.
Removed some depreciated functions that have been commented out for some time.
Compare properties script updated to use font-awesome icons.
Tweaked module popup contents template to cope with oversize images.
Modified how the booking engine saves last minute discount text as new javascript was causing mysql errors.
Modified Add Service to Bill functionality so that freebies can be added to the bill.
Modified how urls are stored in the register property template.
Updated bootstrap 3 edit property pages so that features are laid out correctly.
Removed a definition from the Jomres BS3 supplementary file.
Added a couple of tasks to the sanity check class to prevent the no tariffs warning from showing on the edit and list tariffs pages.
Updated a variety of redirects to ensure the redirected url uses jomresURL appropriately.
Removed form-control css class from dropdown generation class.
Modified how save property script redirects to resolve intermittent issues.

Updated a variety of redirects to ensure the redirected url uses jomresURL appropriately.
Fixed an issue where gmaps wouldn't show in fullscreen view.
Resolved an issue where slideshow div loads images before showing gallery.
Added a flag that prevents the contact us link from showing twice on a page intermittently.


= 8.1.15 =

Added new functionality so that Jomres can discover minicomponents in /templates/jr_leohtian/html/com_jomres/subdir which allows us to deliver templates with Jomres customisations which are specific only to that template.
Added IP numbers to error logs.
Added translation of guest types to basic_contract_details class.
Re-added a salutation that was inadvertently removed, to language files.

= 8.1.14 =

Fixed a bug where a manager could modify bookings that they aren't authorised to modify. Medium level security bug.

= 8.1.13 =

Added shortlist templates to list properties.
Added custom properties fields snippet to list_properties.html

Modified the generatedateinput function as it was creating several issues on non-search based forms that required dates to be entered.

= 8.1.12 =

Improved media centre icons
Tweaked urls to gmaps to ensure that https is used.
Added font awesome to administrator area.
Modified how live scrolling feature appends results to existing div.
Added code to support calculated total price conversion in property list.
Modified how the shortlist feature works, ajax output is now sent via templates. This allows us to override the response with something like FA icons.
Modified layout of output price template slightly.
Tweaked css to make over budget properties opacity more pronounced.
Updated Polish lang files, thanks Patryk.
Added a new lang string to differentiate properties in list properties and property details that have deferred bookings.
Tweaked bottom slightly to change the tooltip binding.
Updated module popup contents to improve layout in BS3.
Added date/time to the error report.
Changed location of qr codes 
Improved searching so that if arrival and departure dates are the same then the min interval is set to 1. This is for users of "by day" functionality as opposed to "by night".

Fixed an issue where carriage returns in output_price.html causes javascript errors in the booking form.
Fixed a faulty path to the calendar icon for non-BS3 installations.
Resolved an issue where duplicate records could be created in the booking data archive.

= 8.1.11 =

Modified the dashboard to use language strings from Jomres lang files instead of strings coded into the javascript file to define month and day names.
Modified system to provide language strings for table tools (flash buttons cannot yet be translated).
Added new administrator area feature to show our Jomres Partners and their plugins.
Modified generateDateInput.php so that it will also recognise asc_arrivalDate to setup javascript that'll change the departure date automatic changes too. This (in a roundabout sort of way) allows us to use ajax search composite on pages that include the booking form. Previously having ASC on pages with the booking form, the booking engine could erroneously pull the arrival date from ajax search composite's form, potentially screwing with the booking engine's dates. We got around that previously by not showing ASC on pages that showed the booking form. Now, we don't need to do that.
Improved the BS2 flat property details template to add more output.
Polish lang file updated, thanks Patryk.
Added a new minicomponent designed to aggregate code from elsewhere so that ajax search can "inherit" search selections from the simple search modules.
Modified paging feature so that PAGING is added to list properties templates, rather than being echoed by 1010listproperties.
Modified Jomres so that optional 99999 triggers are always run if available.
Modified list properties so that imagethumb etc have blank images if no property images are available.
Changed how the property name dropdown is built to account for a recent tweak in property name/description searching.
Restored a commented out setting in property config referring to minimum intervals.
Removed a class from the language dropdown that's no longer required.
Added new strings to lang files relevant to Instant v Deferred booking tags in property list.
Removed overlay snippet code that was added last version, it has been put back into the list properties due to other changes added because of changes being made to the demo.
Added reviews information for use in property details page, not just tabs.
Hardened media centre scripts against spambot intrusion.
Modified the booking form slightly so that the address details slide up/down when sufficient booking details are known, rather than simply fading in/out. This means that the initial booking form area on in flat property details template takes up less space.
Removed some un-needed template files.
Replaced some BS2 hidden classes with their corresponding BS3 classes in room type list.
Added code to allow automatic triggering of bootstrap tooltips on page load and binding to dynamic events.
Modified output price function so that if using bootstrap then original price (price in brackets) is now shown in a tooltip.
Changed Arrival and Departure strings to Check-in and Check-out in english language files.
Added Font Awesome as an optional css library. Many BS2 Joomla templates exclude glyph icons, or name the icons differently, meaning we can't always rely on a template to provide the required icons, so we'll add our own. Switchable because all BS3 joomla templates so far seem to include FA icon sets by default.
Modified the Booking Engine and Search functionality so that calendars now use calendar icons instead of the old calendar image. Makes styling much easier and looks neater.
The clear dates checkbox can now be added to a search template via {CLEARDATES_CHECKBOX} (and associated checkbox can be removed from the js_calendar_input.html template. This helps with styling.
Output price has been changed to use an icon instead of a link on the price to allow users to see the converted price.
Added a new optional trigger to listProperties.

Fixed BS3 edit property template to ensure previously selected features are checked.
Fixed an issue where review results could be incorrectly attributed.
Fixed a bug that prevented stars from showing in property list.
Fixed a bug where un-published properties could show in the agent's page.


= 8.1.10 =

Added new functionality to allow site managers to choose whether or not to show the property list paginated, or to use the older Infinite Scrolling feature.

Modified the image uploader to automatically crop images.
Added modules srch.html templates to files that can be overridden via the Joomla method.
Added a change to ensure that the correct version of editable's css file is called if we're in the administrator area.
Tweaked a path to the dobooking script. (tab contents related)
Added error codes to track obscure upload issues if they exist. (Plugin manager)
Modified the Japanese date pickers file reference.
Removed a stray </select> from the search generation code.
Added quick info output text to property module data script.
Removed some stray spaces from code that was upsetting adaptations of the JavaScript drop downs.
Added a tweak to how property name searching is done so if only one property of a given name exists then the user's directed straight to that property instead of being shown the property list.
Implemented new code for searching by property name, thanks for the contribution Rod.
Added two new triggers for publishing properties ( 02273 for after a property has been successfully published and 02274 for when it has been unpublished ), at the request of a third party developer.
Modified the Bootstrap 3 flat template to allow us to select which elements do not appear in tabs.
Polish lang file updated, many thanks Patryk.
Tweaked how list bookings is shown in ajax loaded tables for JQ UI
Tweaked admin script to ensure temp .js files are deleted for refresh whenever on main control panel or Site Config pages.
Modified "search by" language strings to make them more compact.
Tweaked a condition relating to how budget is shown in the property list.
Added some small changes to currency conversion class to relating to alternate templates.
Added animation delay variable to get_property_module_data.php
Updated the Star image.
Changed search feature to adapt to the search order formula chosen in site config.
Modified layout of module popup for bootstrap3.
Tweaked how chained combo boxes are built.


= 8.1.9 =

Added Japanese language file. Many thanks Jeff.

Improved icons in the BS3 media centre templates.
Updated a version number in an xml file.
Minor tweak to control panel to add the Date to the news output.
Updated Jomres' images to the new logo.
Added an option to use templates to build the currency conversion selector rather than plain old dropdowns, which allows us to add the dropdown to bootstrap toolbars.
Changed the name of the default property created on Jomres installation.

Fixed a misplaced bracket in patTemplate class. Thanks Maritn.
Changed how files are read into the js and css cache classes.
Tweaked how a disabled task's name is determined.


= 8.1.8 =

Refactored javascript and css file handling. Older method was growing to become clumsy, new process automatically creates consolidation scripts (where as many .js files as is practical are presented as one file) and .js and .css files are automatically minified. All new .js and .css files can be supplied un-minified, if the file is ever modifed the served, minified and/or consolidated version of that file is automatically updated.
Updated dump template vars functionality (Site Configuration -> Debugging). Instead of using older patTemplate dump function we now output the name of the individual template and on hover the variables available to the template are shown. It's not pretty, but it makes it very easy for site integrators to identify Jomres template files that they may wish to modify.

Improved price overlay, added ability to switch it on and off, changed the output a little to use new strings and calculations based on how prices are stored.
Improved new functionality related to finding the number of days in the property list search results.
Added a trap to capture what looks like Bots attempting to access the booking form. As the bots can't use the booking engine they're going to the confirmation page without the property uid being set, so we'll redirect these back to the default Jomres page.
Added changes so that custom fields are viewable in show confirmation.
Reworked how the fullpage jomres.php file copying is performed so that it's only done when needed.

Changed how some urls are using in the booking form as they're better "built" and less likely to cause odd redirection behaviour on certain systems.
Fixed a z-index issue in the dashboard calendar.
Fixed a broken link to the ajax animation when live scrolling.

<span class="label label-info">Wordpress</span> Wordpress : Changed how javascript is queued in wp
<span class="label label-info">Wordpress</span> Changed how WP registers the bootstrap tour script so that it doesn't cause .js errors.
<span class="label label-info">Wordpress</span> Fixed a path in management view to the logo
<span class="label label-info">Wordpress</span> Added a check for the wp_jomres class in a function to prevent it from being run if we're outside a Jomres page.
<span class="label label-info">Wordpress</span> Updated the getting started notes to be a bit more relevant to WP users.

<span class="label label-info">Joomla</span> Modified the template reader script to allow Joomla overrides-esque functionality. 
Put templates from /jomres/templates/xxxx/frontend and /jomres/templates/xxxx/backend into /templates/templatename/html/com_jomres or /jomres/templates/xxx/admin into /administrator/templates/templatename/html/com_jomres to override the core Jomres templates.
Existing template editing functionality is retained, however a file placed into a com_jomres directory will override a customisation created using the template editing feature. If there is no file in com_jomres then existing customisations will still be used.
Advantage : People who're familiar with Joomla template overrides can use their favourite functionality still, however
Disadvantage : you cannot have different templates for different property types.


= 8.1.7 =

Added the calendar to the module popup contents.
Added ability to view the changelog in administrator -> developer tools. Reformatted the changelog so that we can start making use of BS labels to make it more readable.
Added a new image overlay tag to property list that shows the cumulative price calculated from the dates in ajax search's dates.

Prevent resources menu option from showing if is Jintour or real-estate property
Changed how currency codes are pulled for listing against invoices.
Changed how invoice creation is done when Booking Approvals are enabled.
Added a tweak to correctly use https if needed when initialising the live_site variable in Joomla.
Added a tweak to correctly use https if needed when initialising the live_site variable in Joomla 2.5
Tweaked detect_cms.php to only define JPATH_PLATFORM if it's not already defined.
Modified basic contract details so that country name is returned instead of country code. 
Added a new country_code array index to ensure that this is also available if needed, in line with basic_property_details functionality.
Added functionality to translate room types for SRPs.
Changed some "exits" to "thrown" errors.
Added code to set_booking_number function so that if the booking number is already set, then it won't be changed.
Added code to allow calling services to pre-select adult and child numbers (change added for beds24 but can be used elsewhere). Add adultnum=N&childnum=N to have adult and child numbers pre-selected in the booking form.
Added requireApproval to the default property settings script.
Added a new function get_periods that'll take (UK formatted dd/mm/yyyy) datetime and return the dates in that period.
Added unconverted price to returned results of jomres/classes/jomres_property_list_prices.class.php
Tweaked the generic booking email class to offer invoice to all templates.
Improved the geo coder templates and how the marker is placed.
Updated news section in control panel to look brighter.

Resolved an issue where a duplicate map marker could be created.
Moved script tag to underneath the images output to see if it resolves a (very rare) timeout issue.
Modified the view agent list to not show properties that haven't been approved yet.
Changed the name of an image.

<span class="label label-info">Wordpress</span> Resolved an issue with ajax based calls being unable to find a property uid due to the url structure.


= 8.1.6 =

Added ability to flag plugins as retired, to advise managers to uninstall older plugins that will not work with current versions of Jomres.

integration.php updated with a small routine to try to determine which file has failed to call jomres_root.php, if JOMRES_ROOT_DIRECTORY isn't set.
Added email_text to allowed fields for input filtering, and improved the allowed tags list to be a little more lenient.
Changed property header to use the large property image in accordance with the advice here https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content  This is an image associated with your media. We suggest that you use an image of at least 1200x630 pixels.
Modified save country and save region scripts to redirect back to the associated lists on save.
Added notes to the top of the guest's view booking page to indicate if a booking has been cancelled.
Hide the cancel button when a booking has been cancelled, from the user's view of the booking.
Broke several functions out of functions.php so that they can be overridden in plugins.
Tweaked the confirmation letter popup to display better.
Added a message to say that the confirmation email has been sent.
Added a button to the administrator control panel that links direct to the front page of the site. Should make it clearer to new users how to go about managing properties.
Updated detect_cms.php to adjust to Joomla's new upgrade strategy, information relating to the problem is provided and an error is thrown.
Updated the Italian language file, many thanks Pierangela.
Added a definition for JPATH_PLATFORM as the Joomla version file uses that instead of _JEXEC when checking to see if the file can be called.

Fixed a broken path to gateway directory to ensure that the gateway logo is shown correctly.
Solved a missing property type image problem in query ui booking form classic room list.
Fixed a bug where wrong users were getting emailed php errors.
Updated how Jomres handle's custom fields in the booking form so that required fields are properly highlighted again.
Modified the installer, added `secret_key_used` column to create contracts table.

= 8.1.5 =

Added a new 99994 trigger point at the end of jomres.php's run. 
Added new 99994 trigger to jomresRedirect function to ensure that 99994 actions are performed both when Jomres finishes running jomres.php, and when calls are redirected to another task.
Changed ajax insert booking so that it doens't exit at the end of it's run, instead it returns.
Disabled a system/misc logging event as it's not needed.
Added a quarter hourly cron job option to the cron class.
Added contract uid and booking number to showtime after quickbooking.
Removed an unnecessary call to close session.
Added several flags to showtime for booking insertion, to store references to amended contract uids.

Fixed an issue where the Product Tour (inline help feature) caused a javascript error on Reg Prop 2.

<span class="label label-info">Wordpress</span> Tweaked the WP cms specific urls functionality to enable Jomres to work on WP sites that have permalinks enabled. This doesn't provide pretty urls, but it does fix an issue where Jomres wouldn't work on sites with permalinks switched on.
<span class="label label-info">Wordpress</span> Improved how WP specific functionality detects if we're in admin area or not. Fixes an issue where admin media centre doesn't know where it is and results in a "something seriously wrong" message.

= 8.1.4 =

Added an is_child flag to the customer types table.

Tweaked list properties to not build the budget class if the feature isn't used. Minor performance improvement.

Confirmation letter script was sending wrong email template.


= 8.1.3 =

Fix : Improved how installation on wordpress is detected.
Change : Disabled asamodule report from showing on WP, due to how urls are generated the report doesn't make sense on WP installations.
Change : Changed the extraservices warning from a danger to a warning level report in the installer.
Change : Disabled/removed some old functionality that was designed for Jomres Standalone and is no longer applicable.

= 8.1.2 =

Change : Updated Polish lang files, thanks Patryk
Change : German language file updated.
Change : Improved a path problem caused by the latest fix.
Change : Added ids to town, street and posted in edit and register property templates to aid geocoder listener.

Fix : Fixed a missing image problem on Jquery ui bookingform.
Fix : Corrected a path for editing room types, image path was incorrect after new 8.1 path changes.
Fix : Updated the wp plugin files to fix a bug with new paths.

= 8.1.1 =

Jomres 8.1.1 released to fix a bug in the miniComponent handler that resulted in incorrect paths.

= 1.0 =
Initial release of this plugin.


== Translations ==

* Jomres includes 31 language files in varying states of translation as we rely on members to feed back their versions of the language files. It includes a [variety of methods for translation](http://manual.jomres.net/editing_labels___languages.html?ms=EQAACAAAAABCQEA=&mw=MjQw&st=MA==&sct=MA==) allowing you to have different labels for different property types, and even individual properties.

*Note:* If you would like to contribute a language file back to the project please email us at sales@jomres.net, typically an update to a language file will earn you between 1-6 months added to your license, depending on the amount of translation that was required to bring the language file up-to-date.

== Additional Info ==

Upgrades are best performed through the Jomres Updates menu option in the administrator area.
For the full Jomres changelog please see http://www.jomres.net/support-mainmenu-209/changelog

== Changelog link ==
For the full Jomres changelog [please click here](http://www.jomres.net/support-mainmenu-209/changelog).

== Post Installation recommendations ==

Jomres is primarily developed against Joomla version 3.x. This means that we are huge fans of Twitter Bootstrap. It's clean, responsive and built into Joomla from the get-go.

Jomres comes with it's own layout templates, and there are three sets of these templates : jQuery UI, Bootstrap 2 and Bootstrap 3. By default, when Jomres is installed into Wordpress it will choose to use the jQuery UI templates. These are a reasonable compromise bearing in mind that it's impossible to make a set of templates that work perfectly with all CMS templates, however in our experience we've found it advantagous to install a Bootstrap 2 or Bootstrap 3 Wordpress template as soon as we create a new Wordpress installation.

We recommend that the first thing you do is find a Bootstrap 2 or 3 Wordpress template that you like and install that on your site. Next, go to Jomres' Site Configuration area and set "Use Jomres Bootstrap templates in the frontend?" to Yes and set "Bootstrap version" to Bootstrap 2 or 3.

This will ensure that your WP template and the Jomres templates play nicely together. The administrator area of Wordpress will still use the jQuery UI based templates, but the public facing pages will use Bootstrap.

== Credits ==
* Many thanks to [Aladar Barthi](http://www.jomres-extras.com/) for your support of Jomres users, and [Rodrigo Rocco](http://jomres-plugins.com) for your continuing efforts in supporting Jomres users on the forum!

